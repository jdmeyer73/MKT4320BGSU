% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/splitsample.R
\name{splitsample}
\alias{splitsample}
\title{Split Sample}
\usage{
splitsample(
  data,
  outcome = NULL,
  group = NULL,
  choice = NULL,
  alt = NULL,
  p = 0.75,
  seed = 4320
)
}
\arguments{
\item{data}{A data frame.}

\item{outcome}{Character string naming the factor outcome variable.
Required when \code{group} is NULL. Ignored otherwise.}

\item{group}{Optional character string naming a grouping variable
(e.g., choice set id or respondent id). If provided, splitting is done
at the group level.}

\item{choice}{Optional character string naming the chosen indicator
(0/1, TRUE/FALSE, or common yes-like strings). Used only when \code{group}
is provided (to create \code{train.mdata}/\code{test.mdata} and/or stratify groups).}

\item{alt}{Optional character string naming the alternative label/ID.
Used with \code{choice} when \code{group} is provided.}

\item{p}{Proportion for the training split (strictly between 0 and 1).}

\item{seed}{Random seed for reproducibility.}
}
\value{
A list containing \code{train} and \code{test}.
When \code{group} is provided, also returns \code{train_groups}, \code{test_groups},
and (if possible) \code{train.mdata}, \code{test.mdata}.
}
\description{
Create training and test samples from a data set.

If \code{group} is NULL, this function performs a classic row-level split and
requires a \emph{factor} \code{outcome} (stratified split).

If \code{group} is provided, the split is done at the group level so all rows
belonging to the same group are kept together (useful for long-format
alternative-specific choice data).

If \code{group} is provided AND \code{choice} + \code{alt} are also provided, the function
additionally returns \code{train.mdata} and \code{test.mdata} as \code{dfidx} objects
(ready for \code{mlogit::mlogit()}), created via \code{dfidx::dfidx()}.
}
\details{
Required packages:
\itemize{
\item caret
\item dfidx (only needed when \code{group} + \code{choice} + \code{alt} are used)
}
}
\examples{
\dontrun{
# --- Classic classification split (row-level) ---
directmktg$buy <- factor(directmktg$buy, levels = c("no","yes"))
splits <- splitsample(directmktg, outcome = "buy")
train <- splits$train
test  <- splits$test

# --- Long-format AS-MNL split (group-level) ---
# group = choice situation id (chid); also create dfidx objects
splits2 <- splitsample(my_long, group = "chid", choice = "choice", alt = "alt", p = 0.8)

# Students then estimate on splits2$train.mdata
# mod <- mlogit::mlogit(choice ~ price + promo | 0, data = splits2$train.mdata)
}

}
