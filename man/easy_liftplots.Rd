% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/easy_liftplots.R
\name{easy_liftplots}
\alias{easy_liftplots}
\title{Lift Diagnostics for easy_uplift Objects}
\usage{
easy_liftplots(
  x,
  vars = "all",
  pairs = NULL,
  ar = NULL,
  ci = 0.95,
  bins = 30,
  numeric_bins = 5,
  by_numeric_bins = 3,
  grid = TRUE,
  top = NULL,
  ft = TRUE
)
}
\arguments{
\item{x}{An object returned by \code{easy_uplift()} (must include \code{x$all}
and \code{x$covariates} or \code{x$spec$covariates}).}

\item{vars}{Character vector of covariate names to plot. Default is
\code{"all"} (uses \code{x$covariates} / \code{x$spec$covariates}).}

\item{pairs}{Optional list of length-2 character vectors specifying
interaction-style plots to create, e.g.,
\code{list(c("recency","zip"), c("gender","income"))}.}

\item{ar}{Optional aspect ratio passed to \code{theme(aspect.ratio = ar)}.
Default is \code{NULL}.}

\item{ci}{Error-bar style. Use \code{0} for \eqn{\pm 1} SD error bars, or one
of \code{c(0.90, 0.95, 0.975, 0.99)} for normal-approximation confidence
intervals. Default is \code{0.95}.}

\item{bins}{Integer; number of bins for the histogram. Default is \code{30}.}

\item{numeric_bins}{Integer; number of quantile bins for numeric covariates.
Default is \code{5}.}

\item{by_numeric_bins}{Integer; number of quantile bins to use for the second
variable in a pair when it is numeric. Default is \code{3}.}

\item{grid}{Logical; if \code{TRUE}, also return paginated cowplot grids of
plots. Default is \code{TRUE}.}

\item{top}{Optional integer. If provided, only the top \code{top} covariates
(by \code{score_wmae}) are included in \code{plots_main/pages_main}.
Rankings are still computed for all covariates.}

\item{ft}{Logical; if \code{TRUE} (default), return ranking tables as
\code{flextable} objects.}
}
\value{
A named list with components:
\itemize{
\item \code{hist}: ggplot histogram of \code{lift}.
\item \code{rank_main}: covariate ranking table (flextable if \code{ft = TRUE}, else data.frame).
\item \code{rank_main_df}: covariate ranking data.frame (always).
\item \code{plots_main}: named list of ggplot main-effect lift plots.
\item \code{pages_main}: (if \code{grid = TRUE}) list of cowplot grids for main-effect plots.
\item \code{rank_pairs}: pair ranking table (if \code{pairs}; flextable if \code{ft = TRUE}).
\item \code{rank_pairs_df}: pair ranking data.frame (if \code{pairs}; always).
\item \code{plots_pairs}: named list of ggplot pair plots (if \code{pairs}).
\item \code{pages_pairs}: (if \code{grid = TRUE} and \code{pairs}) list of cowplot grids for pair plots.
}
}
\description{
Create lift diagnostics for an \code{easy_uplift()} object. The function
always produces (1) a histogram of predicted lift and (2) lift-by-covariate
error-bar plots. Optionally, create interaction-style plots for user-specified
pairs.
}
\details{
\strong{Ranking metrics}
For each covariate, observations are grouped by:
\itemize{
\item quantile bins (numeric covariates; default \code{numeric_bins = 5})
\item levels (factor/character/logical and 0/1 indicators)
}
Let \eqn{\mu = E[lift]} be the overall mean lift and \eqn{\mu_g = E[lift | g]}
be the mean lift in subgroup \eqn{g}. Define a CATE-like deviation:
\deqn{\Delta_g = \mu_g - \mu.}
Then:
\itemize{
\item \code{score_wmae} = \eqn{\sum_g w_g |\Delta_g|} where \eqn{w_g} is the
subgroup proportion. This is the primary importance measure.
\item \code{score_maxabs} = \eqn{\max_g |\Delta_g|}, the largest absolute
subgroup deviation (can be driven by small subgroups).
}

When \code{grid = TRUE}, plots are paginated into cowplot grids of at most 6
plots per page (2x3). The grid pages use a common y-axis range to help compare
effect sizes across covariates.
}
\examples{
\dontrun{
# x is an easy_uplift object created by easy_uplift()
# Histogram + main-effect lift plots for all covariates
out <- easy_liftplots(x)
out$hist

# Only selected covariates
out2 <- easy_liftplots(x, vars = c("recency", "frequency"), ci = 0.95)
out2$plots_main[["recency"]]

# Pair plot
out3 <- easy_liftplots(x, pairs = list(c("recency", "frequency")), ci = 0.95)
out3$plots_pairs[[1]]
}

}
\seealso{
\code{\link{liftplot}} (deprecated)
}
