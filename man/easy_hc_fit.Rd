% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/easy_hc_fit.R
\name{easy_hc_fit}
\alias{easy_hc_fit}
\title{Easy Hierarchical Clustering (Fit & Diagnostics)}
\usage{
easy_hc_fit(
  data,
  vars,
  dist = c("euc", "euc2", "max", "abs", "bin"),
  method = c("ward", "single", "complete", "average"),
  k_range = 1:10,
  standardize = TRUE,
  show_dend = TRUE,
  dend_max_n = 300
)
}
\arguments{
\item{data}{A data frame containing the full dataset.}

\item{vars}{Character vector of numeric segmentation variable names.}

\item{dist}{Distance measure. One of: \code{"euc"}, \code{"euc2"},
\code{"max"}, \code{"abs"}, \code{"bin"}.}

\item{method}{Linkage method. One of: \code{"ward"}, \code{"single"},
\code{"complete"}, \code{"average"}.}

\item{k_range}{Integer vector of cluster solutions to evaluate (default \code{1:10};
allowed \code{1}--\code{20}).}

\item{standardize}{Logical; if \code{TRUE} (default), standardizes segmentation
variables prior to clustering.}

\item{show_dend}{Logical; if \code{TRUE} (default), plots a dendrogram (skipped if
\code{n > dend_max_n}).}

\item{dend_max_n}{Integer; maximum sample size for drawing a dendrogram (default 300).}
}
\value{
Invisibly returns a list with:
\itemize{
\item \code{hc}: The \code{hclust} object.
\item \code{diss}: The distance object used for clustering.
\item \code{stop_raw}: A data frame of stopping indices and diagnostics by \code{k}.
\item \code{stop}: A formatted \code{flextable} version of \code{stop_raw}.
\item \code{data_scaled}: The standardized segmentation data (or \code{NULL} if not standardized).
\item \code{settings}: A list of settings used to fit the model.
\item \code{key}: A list containing row indices (\code{row_index_all}, \code{row_index_used}, \code{dropped_na}).
}
}
\description{
Fit a hierarchical agglomerative clustering solution using selected numeric
segmentation variables, compute stopping rules and cluster-balance diagnostics
across a range of \code{k}, and (optionally) plot a dendrogram with cluster bars.
}
\details{
Rows with missing values in the segmentation variables are dropped for
clustering. The indices of rows used (and dropped) are stored in \code{key}
so that cluster membership can be reattached later via \code{\link{easy_hc_final}}.

Stopping/diagnostic outputs include Duda/Hart, pseudo-\eqn{t^2}, Gap statistic
(1-SE rule), and cluster size balance flags (smallest cluster proportion,
largest cluster proportion, and cluster size coefficient of variation).
}
\examples{
\dontrun{
# Fit + diagnostics (dendrogram shown if n <= dend_max_n)
fit <- easy_hc_fit(
  data = ffseg,
  vars = c("eatin", "hours", "health"),
  dist = "euc",
  method = "ward",
  k_range = 2:10
)

# View diagnostics table (flextable) and raw data.frame
fit$stop
fit$stop_raw

# Fit without dendrogram
fit2 <- easy_hc_fit(
  data = ffseg,
  vars = c("eatin", "hours", "health"),
  show_dend = FALSE
)
}

}
