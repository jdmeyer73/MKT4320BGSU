% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/easy_hc_final.R
\name{easy_hc_final}
\alias{easy_hc_final}
\title{Easy Hierarchical Clustering (Final Solution)}
\usage{
easy_hc_final(
  fit,
  data,
  k,
  cluster_col = "cluster",
  conf_level = 0.95,
  auto_print = TRUE
)
}
\arguments{
\item{fit}{An object returned by \code{\link{easy_hc_fit}}.}

\item{data}{The original full dataset used to create \code{fit}.}

\item{k}{Integer; number of clusters to extract.}

\item{cluster_col}{Name of the cluster column to append to \code{data}
(default \code{"cluster"}). Must not already exist in \code{data}.}

\item{conf_level}{Confidence level for CI error bars when plotting (default 0.95).}

\item{auto_print}{Logical; if \code{TRUE} (default), prints \code{props} and
\code{profile} and displays the plot (if available).}
}
\value{
Invisibly returns a list with:
\itemize{
\item \code{props}: Cluster counts and proportions (computed on used rows only).
\item \code{profile}: Cluster means for the segmentation variables (non-standardized scale).
\item \code{plot}: A ggplot object (only if \code{k < 6}); otherwise \code{NULL}.
\item \code{data}: The full dataset with the appended membership column.
\item \code{membership}: Integer membership vector for the used rows (length = rows used in \code{fit}).
}
}
\description{
Choose a final number of clusters (\code{k}) from an \code{\link{easy_hc_fit}}
result, reattach membership to the full dataset using the stored row-index key,
and produce cluster proportions and a mean profile table.
}
\details{
Cluster membership is computed on the rows that were actually used in clustering
(complete cases on the segmentation variables). Membership is then reattached
to the full dataset; rows not used for clustering receive \code{NA} membership.

If \code{k < 6}, the function also returns a bar plot of mean profiles by cluster
with confidence-interval error bars (default 95\%).
}
\examples{
\dontrun{
# Fit clustering first
fit <- easy_hc_fit(
  data = ffseg,
  vars = c("eatin", "hours", "health"),
  dist = "euc",
  method = "ward",
  k_range = 2:10
)

# Choose a final k and attach membership
final <- easy_hc_final(fit, data = ffseg, k = 3, cluster_col = "HC3")

# Outputs
final$props
final$profile
head(final$data)

# Suppress printing
final2 <- easy_hc_final(fit, data = ffseg, k = 4, auto_print = FALSE)
}

}
